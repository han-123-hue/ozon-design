<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½ ĞœĞ°Ğ³Ğ½Ğ¸Ñ‚Ğ°</title>
    <style>
        :root { --primary: #005bff; --accent: #ff0055; }
        body { font-family: -apple-system, system-ui, sans-serif; margin: 0; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; -webkit-tap-highlight-color: transparent; }
        .header { background: var(--primary); color: white; width: 100%; text-align: center; padding: 15px 0; font-weight: bold; font-size: 18px; }
        .preview-container { width: 300px; height: 300px; margin: 20px; background: white; border-radius: 15px; overflow: hidden; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 4px solid white; touch-action: none; }
        #magnet-bg { width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 1; object-fit: cover; pointer-events: none; }
        #user-face { position: absolute; z-index: 2; width: 150px; cursor: move; touch-action: none; transform: translate(0,0); }
        .controls { width: 85%; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); }
        /* å¼ºåŒ–æŒ‰é’®åœ¨æ‰‹æœºä¸Šçš„ç‚¹å‡»æ„Ÿ */
        .upload-wrapper { background: var(--primary); color: white; padding: 16px; border-radius: 12px; text-align: center; font-weight: bold; margin-bottom: 15px; position: relative; active: opacity: 0.8; }
        #file-input { position: absolute; left: 0; top: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
        .btn-order { display: none; background: var(--accent); color: white; padding: 16px; border-radius: 12px; text-align: center; font-weight: bold; text-decoration: none; margin-top: 10px; }
        .tip { font-size: 13px; color: #888; text-align: center; margin-top: 10px; line-height: 1.4; }
        #loading { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 12px; z-index: 100; }
    </style>
</head>
<body>

<div class="header">ğŸ¨ AI Ğ¦Ğ•ĞĞ¢Ğ  Ğ”Ğ˜Ğ—ĞĞ™ĞĞ</div>

<div class="preview-container" id="capture-area">
    <img id="magnet-bg" src="https://img.alicdn.com/imgextra/i4/2210667046465/O1CN01Zp1X1X1X1X1X1X1X1X_!!2210667046465.jpg" alt="bg">
    <img id="user-face" src="" style="display: none;" alt="user">
</div>

<div id="loading">âœ¨ AI ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°...</div>

<div class="controls">
    <div class="upload-wrapper">
        ğŸ“¸ Ğ—ĞĞ“Ğ Ğ£Ğ—Ğ˜Ğ¢Ğ¬ Ğ¤ĞĞ¢Ğ (ä¸Šä¼ ç…§ç‰‡)
        <input type="file" id="file-input" accept="image/*">
    </div>
    
    <p class="tip">Ğ”Ğ²Ğ¸Ğ³Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¿Ğ°Ğ»ÑŒÑ†ĞµĞ¼ Ğ´Ğ»Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸<br>(æ‰‹åŠ¨è°ƒæ•´ç…§ç‰‡ä½ç½®)</p>
    
    <a href="https://www.ozon.ru/cart" id="order-link" class="btn-order">ğŸ›’ Ğ—ĞĞšĞĞ—ĞĞ¢Ğ¬ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡</a>
</div>

<script>
    const fileInput = document.getElementById('file-input');
    const userFace = document.getElementById('user-face');
    const loading = document.getElementById('loading');
    const orderLink = document.getElementById('order-link');

    // æ‰‹æœºç«¯ä¸“é—¨ä¼˜åŒ–çš„ä¸Šä¼ ç›‘å¬
    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        loading.style.display = 'block';
        
        const reader = new FileReader();
        reader.onload = function(event) {
            userFace.src = event.target.result;
            userFace.onload = function() {
                userFace.style.display = 'block';
                userFace.style.top = '75px';
                userFace.style.left = '75px';
                loading.style.display = 'none';
                orderLink.style.display = 'block';
            };
        };
        reader.onerror = () => alert('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾.');
        reader.readAsDataURL(file);
    });

    // æ‰‹æœºç«¯æè‡´ä¸æ»‘çš„æ‹–æ‹½ä»£ç 
    let isDragging = false;
    let startX, startY, initialX, initialY;

    userFace.addEventListener('touchstart', (e) => {
        isDragging = true;
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        initialX = userFace.offsetLeft;
        initialY = userFace.offsetTop;
    }, {passive: true});

    document.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        const currentX = e.touches[0].clientX;
        const currentY = e.touches[0].clientY;
        
        const dx = currentX - startX;
        const dy = currentY - startY;
        
        userFace.style.left = (initialX + dx) + 'px';
        userFace.style.top = (initialY + dy) + 'px';
    }, {passive: false});

    document.addEventListener('touchend', () => {
        isDragging = false;
    });

</script>
</body>
</html>
