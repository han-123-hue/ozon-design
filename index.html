<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xingbai-Style Design Center</title>
    <style>
        :root { --ozon-blue: #005bff; --dark-bg: #1a1a1a; }
        body { font-family: -apple-system, sans-serif; margin: 0; background: #f0f2f5; display: flex; flex-direction: column; height: 100vh; }
        
        /* é¡¶éƒ¨æ ‡é¢˜æ  */
        .app-bar { background: white; padding: 15px; text-align: center; font-weight: bold; border-bottom: 1px solid #ddd; }
        
        /* ä¸»ç”»å¸ƒåŒº - æ¨¡ä»¿å½¢ç™½çš„æ‚¬æµ®æ„Ÿ */
        .canvas-wrapper { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; }
        #capture-area { width: 320px; height: 320px; background: white; border-radius: 12px; position: relative; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        #bg-img { width: 100%; height: 100%; object-fit: cover; }
        #user-photo { position: absolute; width: 150px; cursor: move; touch-action: none; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3)); display: none; }

        /* æ¨¡ç‰ˆåˆ†ç±»æ»‘åŠ¨æ¡ */
        .category-bar { background: white; padding: 10px 0; overflow-x: auto; white-space: nowrap; border-top: 1px solid #eee; }
        .template-card { width: 60px; height: 60px; margin: 0 8px; border-radius: 8px; border: 2px solid transparent; display: inline-block; overflow: hidden; }
        .template-card.active { border-color: var(--ozon-blue); }
        .template-card img { width: 100%; height: 100%; object-fit: cover; }

        /* åº•éƒ¨æ“ä½œåŒº */
        .action-sheet { background: white; padding: 20px; border-top-left-radius: 20px; border-top-right-radius: 20px; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); }
        .btn-upload { background: var(--ozon-blue); color: white; padding: 15px; border-radius: 12px; text-align: center; font-weight: bold; cursor: pointer; }
        
        #loading { display: none; position: fixed; inset: 0; background: rgba(255,255,255,0.9); z-index: 100; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div class="app-bar">ğŸ¨ Ğ¦Ğ•ĞĞ¢Ğ  ĞŸĞ•Ğ Ğ¡ĞĞĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ˜</div>

<div class="canvas-wrapper">
    <div id="capture-area">
        <img id="bg-img" src="https://img.alicdn.com/imgextra/i4/2210667046465/O1CN01Zp1X1X1X1X1X1X1X1X_!!2210667046465.jpg">
        <img id="user-photo" src="">
    </div>
</div>

<div class="category-bar">
    <div class="template-card active" onclick="setBg('https://img.alicdn.com/imgextra/i4/2210667046465/O1CN01Zp1X1X1X1X1X1X1X1X_!!2210667046465.jpg', this)"><img src="https://img.alicdn.com/imgextra/i4/2210667046465/O1CN01Zp1X1X1X1X1X1X1X1X_!!2210667046465.jpg"></div>
    <div class="template-card" onclick="setBg('https://img.alicdn.com/imgextra/i2/2210667046465/O1CN016pXv1r1X1X1X1X1X1X_!!2210667046465.jpg', this)"><img src="https://img.alicdn.com/imgextra/i2/2210667046465/O1CN016pXv1r1X1X1X1X1X1X_!!2210667046465.jpg"></div>
    </div>

<div class="action-sheet">
    <label class="btn-upload">
        ğŸ“¸ Ğ’Ğ«Ğ‘Ğ ĞĞ¢Ğ¬ Ğ¤ĞĞ¢Ğ (é€‰æ‹©ç…§ç‰‡)
        <input type="file" id="upload" accept="image/*" style="display:none">
    </label>
    <p style="text-align:center; font-size:12px; color:#888; margin-top:10px;">Ğ”Ğ²Ğ¸Ğ³Ğ°Ğ¹Ñ‚Ğµ Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¿Ğ°Ğ»ÑŒÑ†Ğ°Ğ¼Ğ¸</p>
</div>

<div id="loading">ğŸš€ AI ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ...</div>

<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script>
    const API_KEY = 'YOUR_KEY'; // å¡«å…¥ä½ çš„ Remove.bg Key
    
    function setBg(url, el) {
        document.getElementById('bg-img').src = url;
        document.querySelectorAll('.template-card').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
    }

    document.getElementById('upload').onchange = async (e) => {
        const file = e.target.files[0];
        if(!file) return;
        document.getElementById('loading').style.display = 'flex';
        
        const fd = new FormData();
        fd.append('image_file', file);
        
        try {
            const res = await fetch('https://api.remove.bg/v1.0/removebg', {
                method: 'POST',
                headers: {'X-Api-Key': API_KEY},
                body: fd
            });
            if(res.ok) {
                const blob = await res.blob();
                const photo = document.getElementById('user-photo');
                photo.src = URL.createObjectURL(blob);
                photo.style.display = 'block';
            }
        } finally {
            document.getElementById('loading').style.display = 'none';
        }
    };

    // å®Œç¾å¤åˆ»å½¢ç™½çš„ç¼©æ”¾æ—‹è½¬æ‰‹åŠ¿
    let angle = 0, scale = 1;
    interact('#user-photo').gesturable({
        onmove: (ev) => {
            scale *= (1 + ev.ds);
            angle += ev.da;
            ev.target.style.transform = `scale(${scale}) rotate(${angle}deg)`;
        }
    }).draggable({
        onmove: (ev) => {
            const x = (parseFloat(ev.target.dataset.x) || 0) + ev.dx;
            const y = (parseFloat(ev.target.dataset.y) || 0) + ev.dy;
            ev.target.style.left = `${75 + x}px`;
            ev.target.style.top = `${75 + y}px`;
            ev.target.dataset.x = x;
            ev.target.dataset.y = y;
        }
    });
</script>
</body>
</html>
